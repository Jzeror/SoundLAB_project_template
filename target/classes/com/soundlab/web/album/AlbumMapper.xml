<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.soundlab.web.album.AlbumMapper">
<select id="newAl_recent" resultType="java.util.Map">
	SELECT 
  AL.ALBUM_TITLE, 
  AR.ARTIST_NAME,
  AL.RELEASE_DATE,
  
  (SELECT CONCAT(IMG_NAME, '.', EXT)
                    FROM IMG
                   WHERE SEQ LIKE AL.ALBUM_SEQ) IMG
 FROM MUSIC MUS
         JOIN ALBUM AL ON MUS.ALBUM_SEQ LIKE AL.ALBUM_SEQ
         JOIN ARTIST AR ON MUS.ARTIST_SEQ LIKE AR.ARTIST_SEQ
 ORDER BY   AL.RELEASE_DATE DESC LIMIT 6
</select>
<select id="newAl_like" resultType="java.util.Map">
	SELECT DISTINCT AL.ALBUM_TITLE, 
  COUNT(SEQ_GROUP)AS LIKE_COUNT,
    SEQ_GROUP,

  AR.ARTIST_NAME,
  AL.RELEASE_DATE,
  MUS.MUSIC_TITLE,
  (SELECT CONCAT(IMG_NAME, '.', EXT)
                    FROM IMG
                   WHERE SEQ LIKE AL.ALBUM_SEQ) IMG
 FROM MUSIC MUS
         JOIN ALBUM AL ON MUS.ALBUM_SEQ LIKE AL.ALBUM_SEQ
         JOIN ARTIST AR ON MUS.ARTIST_SEQ LIKE AR.ARTIST_SEQ
         JOIN UPDOWN UP ON MUS.MUSIC_SEQ LIKE UP.SEQ_GROUP
WHERE SG_ELEMENT LIKE 'music' AND AL.RELEASE_DATE IS NOT NULL
GROUP BY ALBUM_TITLE
ORDER BY  COUNT(SEQ_GROUP) DESC, RELEASE_DATE DESC, AL.RELEASE_DATE DESC LIMIT 6
</select>	
</mapper>